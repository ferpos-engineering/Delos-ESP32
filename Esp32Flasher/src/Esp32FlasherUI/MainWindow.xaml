<Window x:Class="Esp32FlasherUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ESP32 Flasher (esptool)" Height="640" Width="900"
        WindowStartupLocation="CenterScreen"
        Icon="/img/app-icon.ico">
  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
        <TextBlock Text="COM:" VerticalAlignment="Center" Width="50"/>
        <ComboBox Width="485" ItemsSource="{Binding Ports}" SelectedItem="{Binding SelectedPort}"/>
        <Button Margin="8,0,0,0" Command="{Binding RefreshPortsCommand}">
            <Button.ToolTip>
                <StackPanel>
                    <TextBlock FontWeight="SemiBold" Text="Refresh COM"/>
                    <TextBlock Text="Updates the list of available Serial COM ports" Opacity="0.8"/>
                </StackPanel>
            </Button.ToolTip>
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <Image Width="16" Height="16" Margin="0,0,0,0" Source="{StaticResource refresh_iconDrawingImage}"/>
            </StackPanel>
        </Button>
        <TextBlock Text="Baud:" VerticalAlignment="Center" Margin="20,0,0,0" Width="60"/>
        <ComboBox Width="140" ItemsSource="{Binding BaudRates}" SelectedItem="{Binding SelectedBaud}"/>
    </StackPanel>

    <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,0,0,6">
      <TextBlock Text="bootloader.bin:" VerticalAlignment="Center" Width="120"/>
      <TextBox Width="650" Text="{Binding BootloaderPath}" />
      <Button Content="..." Width="30" Margin="8,0,0,0" Command="{Binding BrowseBootloaderCommand}"/>
    </StackPanel>

    <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="0,0,0,6">
      <TextBlock Text="partition-table.bin:" VerticalAlignment="Center" Width="120"/>
      <TextBox Width="650" Text="{Binding PartitionPath}" />
      <Button Content="..." Width="30" Margin="8,0,0,0" Command="{Binding BrowsePartitionCommand}"/>
    </StackPanel>

    <StackPanel Orientation="Horizontal" Grid.Row="3" Margin="0,0,0,6">
      <TextBlock Text="firmware.bin:" VerticalAlignment="Center" Width="120"/>
      <TextBox Width="650" Text="{Binding FirmwarePath}" />
      <Button Content="..." Width="30" Margin="8,0,0,0" Command="{Binding BrowseFirmwareCommand}"/>
    </StackPanel>

    <StackPanel Orientation="Horizontal" Grid.Row="4" Margin="0,8,0,8">
      <Button Content="Erase Flash" Width="120" Command="{Binding EraseCommand}" IsEnabled="{Binding IsIdle}"/>
      <Button Content="Flash" Width="120" Margin="8,0,0,0" Command="{Binding FlashCommand}" IsEnabled="{Binding IsIdle}"/>
      <Button Content="Cancel" Width="120" Margin="8,0,0,0" Command="{Binding CancelCommand}" IsEnabled="{Binding IsBusy}"/>
      <TextBlock Text="{Binding StatusText}" VerticalAlignment="Center" Margin="16,0,0,0"/>
    </StackPanel>

    <ProgressBar Grid.Row="5" Height="18" Minimum="0" Maximum="100" Value="{Binding Progress}" />

    <TextBlock Grid.Row="6" Text="Log:" Margin="0,8,0,4"/>

    <TextBox Grid.Row="7" Text="{Binding LogText, Mode=OneWay}" FontFamily="Consolas"
             IsReadOnly="True" TextWrapping="NoWrap"
             VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"/>
  </Grid>
</Window>
